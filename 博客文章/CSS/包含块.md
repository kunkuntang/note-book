#### 包含块（containing block）

在CSS中，有时一个元素的位置和尺寸计算都相对于一个矩形，这个矩形被称作包含块。包含块是一个相对的概念，比如子元素的初始化布局总是在父元素的左上角，这就是一个相对的概念。其中父元素就是一个参照物，但实际上这些元素都是根据包含块所在的位置进行布局的。每个元素都会生成一个包含块，但这个包含块是虚无的，你看不到也摸不着，只是一个概念。举个例子，代码如下：

```
<div>
    <p>
        <span></span>
    </p>
</div>
```

div包含着p，p包含着span，此时div会生成一个包含块来包含p和span，p会生成一个包含块来包含span。包含块最主要的作用就是给它里面的元素一个位置上的参照，也就是它该从哪里开始摆放。

包含块并不会限制它里面元素的大小，如果里面的元素比包含块大，那么超出的部分就会被溢出，代码如下。

```
<style>
div{
    width: 100px;
    height: 100px;
    background-color: red;
}
div p{
    width: 100px;
    height: 100px;
    background-color: pink;
    margin-left: 100px;
}
</style>
<div>
    <p></p>
</div>
```

如上面的代码，div生成的包含块包含着p，因此p元素参照着这个包含块来定位，可以看到代码中用了一个margin-left值，也是参照着包含块的位置来计算的。如果没有参照这个概念，不知道会乱成什么样子。另外，也可以发现虽然p元素超出了包含块，但并没有被隐藏，因此也可以说明包含块并不会对里面的盒子大小做限制。如果想让溢出的隐藏，只需要给div加一个overflow:hideen即可，代码如下:

```
div{
    width: 100px;
    height: 100px;
    background-color: red;
    overflow: hidden;
}
```

一个元素的位置和尺寸与它的包含块息息相关，而元素会为它的子孙元素创建包含块，但这并不代表这个包含块就是它的父元素（比如定位元素会根据距离它最近的祖先定位元素来作为它的包含块）。再次强调包含块只是一个概念。包含块最终的样子是由元素自身和它的祖先元素的样式等决定的（因此很容易把包含块理解成父元素）。

1. 包含块的创建

- 在HTML中，根元素的包含块叫作初始包含块，具体创建由客户端决定；
- 当定位值为fixed，则包含块由视口创建；
- 当定位值为relative、static或没有设置定位属性，则包含块由最近的父元素或祖先元素创建；
- 当祖先元素是行内元素时，那么包含块取决于父元素或祖先元素的direction属性。

举个例子，代码如下：

```
<body>
  <div>
      <span>
          <em></em>
        </span>
    </div>
</body>
```

其中div的包含块由body创建，span的包含块又是div创建，但这里并不是说div就是其包含块，em的包含块由span创建。